---
title: "EDA"
authors:
- Kevin Sheng
- Arushi Agarwal
- Peter Kim
- Nathan Dang
output: html_notebook
---

```{r setup, include = FALSE}
knitr::opts_chunk$set(echo = FALSE, cache = T, fig.width=6, fig.height=3)
options(scipen = 0, digits = 3)  # controls base R output
if (!require('pacman')) {
    install.packages('pacman')
}
pacman::p_load(tidyverse, data.table)
```

```{r initialize crap, include = FALSE}
data <- fread("../data/final_data.csv")
```

let's start off with some rudimentary stuff
```{r rudimentary stuff}
data %>%
    select(-c("fips", "fips_state", "fips_county")) %>%
    summary()
```

# start with population

for some weird reason population isn't a normal distribution
```{r}
data %>% ggplot() + geom_histogram(aes(x = pop), bins = 100)
```

even if you just break down the first bar, it isn't really normal
```{r}
# to prevent the super big counties from making the rest really darn small
pop_lim <- 2e5
lim_data <- data %>% filter(pop < pop_lim)
lim_data %>% ggplot() + geom_histogram(aes(x = pop), bins = 100)
```

let's try plotting population against some stats, maybe larger cities have some common characteristics
```{r}
points <- c("property crime", "violent crime")
lim_data %>%
    ggplot(aes(x = pop)) +
    geom_jitter(aes(y = property_crime_rate, colour = points[1])) +
    geom_jitter(aes(y = violent_crime_rate, colour = points[2])) +
    scale_color_manual("type", breaks = points, values = c("blue", "red")) +
    xlab("population") +
    ylab("crime per 100k people") +
    labs(title = "crime rates vs. population")

points <- c("unemployment rate", "poverty rate")
lim_data %>%
    ggplot(aes(x = pop)) +
    geom_jitter(aes(y = unemployment_rate, colour = points[1])) +
    geom_jitter(aes(y = poverty, colour = points[2])) +
    scale_color_manual("type", breaks = points, values = c("purple", "red")) +
    xlab("population") +
    ylab("percentage") +
    labs(title = "percentage stuff vs. population")

points <- c("median household income", "per capita income")
lim_data %>%
    ggplot(aes(x = pop)) +
    geom_jitter(aes(y = median_household_income, colour = points[1])) +
    geom_jitter(aes(y = per_capita_income, colour = points[2])) +
    scale_color_manual("type", breaks = points, values = c("green", "yellow")) +
    xlab("population") +
    ylab("income ($)") +
    labs(title = "income vs. population")
```
oh...kay... those weren't really the results i was hoping for

by the way if you see that one county that has a property crime rate of 5k per 100k people, it's bibb county in georgia \

ok now let's plot some stuff against `hs_grad`, maybe that'll yield better results
```{r}
points <- c("property crime", "violent crime")
lim_data %>%
    ggplot(aes(x = hs_grad)) +
    geom_jitter(aes(y = property_crime_rate, colour = points[1])) +
    geom_jitter(aes(y = violent_crime_rate, colour = points[2])) +
    scale_color_manual("type", breaks = points, values = c("blue", "red")) +
    xlab("high school grad rate") +
    ylab("crime per 100k people") +
    labs(title = "crime rates vs. high school grad rate")

points <- c("unemployment rate", "poverty rate")
lim_data %>%
    ggplot(aes(x = hs_grad)) +
    geom_jitter(aes(y = unemployment_rate, colour = points[1])) +
    geom_jitter(aes(y = poverty, colour = points[2])) +
    scale_color_manual("type", breaks = points, values = c("purple", "red")) +
    xlab("high school grad rate") +
    ylab("percentage") +
    labs(title = "percentage stuff vs. high school grad rate")

points <- c("median household income", "per capita income")
lim_data %>%
    ggplot(aes(x = hs_grad)) +
    geom_jitter(aes(y = median_household_income, colour = points[1])) +
    geom_jitter(aes(y = per_capita_income, colour = points[2])) +
    scale_color_manual("type", breaks = points, values = c("green", "yellow")) +
    xlab("high school grad rate") +
    ylab("income ($)") +
    labs(title = "income vs. high school grad rate")
```
wow that's so much better \
maybe our idea wasn't absolute dogwater

also tried graphing `broadband` and `computer` against `median_household_income` and got this:
```{r}
points <- c("broadband access", "computer access %")
lim_data %>%
    ggplot(aes(x = median_household_income)) +
    geom_jitter(aes(y = broadband, colour = points[1])) +
    geom_jitter(aes(y = computer, colour = points[2])) +
    scale_color_manual("type", breaks = points, values = c("cyan", "blue")) +
    xlab("median household income") +
    ylab("% of pop") +
    labs(title = "tech access measures vs. median household income")
```
a very positive correlation, but it's painfully obvious when you realize that richer families will *obviously* have more purchasing power for tech products and stuff \
so yeah, we're taking that away from the predictors because it's cheating, in a sense
